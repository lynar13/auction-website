const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/create-BKCc6AWS.js","assets/listing-C2KN82Sj.js","assets/cachedFetch-OvMXQHTG.js","assets/edit-5uyVXR-P.js","assets/view-C-_WJY0R.js","assets/profile-CALHdtQO.js","assets/profile-gh1bRarO.js","assets/viewList-C6Elu1Fq.js","assets/home-D0eBwYrG.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const A="modulepreload",P=function(o){return"/auction-website/"+o},m={},u=function(e,n,a){let t=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");t=Promise.allSettled(n.map(c=>{if(c=P(c),c in m)return;m[c]=!0;const d=c.endsWith(".css"),w=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${w}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":A,d||(l.as="script"),l.crossOrigin="",l.href=c,i&&l.setAttribute("nonce",i),document.head.appendChild(l),d)return new Promise((E,S)=>{l.addEventListener("load",E),l.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return t.then(s=>{for(const i of s||[])i.status==="rejected"&&r(i.reason);return e().catch(r)})},g="https://v2.api.noroff.dev",_=`${g}/auth`,O=`${_}/login`,b=`${_}/register`,p=`${g}/auction`,I=`${p}/listings`,k=`${p}/profiles`,R=o=>`${I}/${o}`,v=`${I}/search`,$=o=>`https://v2.api.noroff.dev/auction/listings/${o}/bids`,N="78300a41-8e7a-40b2-804e-14463ccd9ab1";function f(o=!0,e=!1){const n=e?{}:{"Content-Type":"application/json"},a=localStorage.getItem("token");return o&&a&&(n.Authorization=`Bearer ${a}`),n["X-Noroff-API-Key"]=N,n}class T{constructor(){this.auth.login=this.auth.login.bind(this),this.auth.register=this.auth.register.bind(this)}get user(){try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch{return null}}set user(e){localStorage.setItem("user",JSON.stringify(e))}get token(){return localStorage.getItem("token")||null}set token(e){localStorage.setItem("token",e)}auth={login:async function({email:e,password:n}){const a=JSON.stringify({email:e,password:n}),t=await fetch(O,{method:"POST",headers:f(!0),body:a});if(t.ok){const{data:s}=await t.json(),{accessToken:i,...c}=s;return this.user=c,this.token=i,{user:c,token:i}}const r=await t.json();throw new Error(r.message||"Couldn't login")}.bind(this),register:async function({name:e,email:n,password:a}){const t=JSON.stringify({name:e,email:n,password:a}),r=await fetch(b,{method:"POST",headers:f(!1),body:t}),s=await r.json();if(r.ok){const i=s.data;if(!i)throw new Error("No user data returned from the API");return localStorage.setItem("user",JSON.stringify(i)),{user:i}}throw new Error(s.message||"Couldn't register")}.bind(this)};search={listings:async e=>{const n=new URL(`${v}?q=${e}`),a=await fetch(n,{headers:f()});if(a.ok){const{data:t}=await a.json();return t}throw new Error("Couldn't search listings")}}}new T;function h(){const o=localStorage.getItem("user");if(o)try{const e=JSON.parse(o);if(!e||!e.email||!e.name)throw new Error("Invalid user data: Missing email or name");return e}catch(e){return console.error("Error parsing user data:",e.message),alert("Invalid user data. Please log in again."),localStorage.removeItem("user"),window.location.href="/auth/login/index.html",!1}return alert("You must be logged in to access this page."),window.location.href="/auth/login/index.html",!1}async function y(o=window.location.pathname){switch(o.replace("/auction-website","")){case"/auth/login/index.html":await u(()=>import("./login-D4RJYSi9.js"),[]);break;case"/auth/register/index.html":await u(()=>import("./register-Bm1m272S.js"),[]);break;case"/listing/create/index.html":h()&&await u(()=>import("./create-BKCc6AWS.js"),__vite__mapDeps([0,1,2]));break;case"/listing/edit/index.html":h()&&await u(()=>import("./edit-5uyVXR-P.js"),__vite__mapDeps([3,1,2]));break;case"/listing/index.html":await u(()=>import("./view-C-_WJY0R.js"),__vite__mapDeps([4,1,2]));break;case"/profile/index.html":h()&&await u(()=>import("./profile-CALHdtQO.js"),__vite__mapDeps([5,6,2]));break;case"/listings/index.html":await u(()=>import("./viewList-C6Elu1Fq.js"),__vite__mapDeps([7,1,2,6]));break;default:await u(()=>import("./home-D0eBwYrG.js"),__vite__mapDeps([8,1,2]))}}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("loginButton"),e=document.getElementById("registerButton"),n=document.getElementById("logoutButton"),a=localStorage.getItem("token"),t=localStorage.getItem("user");if(a&&t)try{const r=JSON.parse(t);o&&(o.style.display="none"),e&&(e.style.display="none"),n&&(n.style.display="inline-block")}catch(r){console.error("Error parsing user data:",r.message),localStorage.removeItem("user")}else o&&(o.style.display="inline-block"),e&&(e.style.display="inline-block"),n&&(n.style.display="none");y()});async function L(){await y(window.location.pathname)}L();export{$ as A,T as N,k as a,R as b,v as c,I as d,f as h};
