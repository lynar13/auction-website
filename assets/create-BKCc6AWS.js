import{c as s}from"./listing-C2KN82Sj.js";import"./cachedFetch-OvMXQHTG.js";import"./app-vh6XL3P4.js";document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("createListingForm");if(!n){console.error("Create listing form not found in the DOM");return}function o(r,i="danger"){const e=document.createElement("div");e.className=`alert alert-${i} mt-3`,e.textContent=r,n.parentElement.insertBefore(e,n),setTimeout(()=>{e.remove()},3e3)}n.addEventListener("submit",async r=>{r.preventDefault();const i=new FormData(n),e=Object.fromEntries(i.entries());e.tags=e.tags?e.tags.split(",").map(t=>t.trim()):[],e.media=e.media?e.media.split(",").map(t=>({url:t.trim()})):[],e.endsAt&&(e.endsAt=new Date(e.endsAt).toISOString()),console.log("Payload being sent:",e);try{const t=await s(e);o("Listing created successfully!","success"),setTimeout(()=>{window.location.href=`/profile/index.html?id=${t.id}`},2e3)}catch(t){console.error("Error creating listing:",t.message),o(`Failed to create listing: ${t.message}`,"danger")}})});
