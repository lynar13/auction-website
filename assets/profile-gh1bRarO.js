import{f as c}from"./cachedFetch-OvMXQHTG.js";import{h as n,a as i}from"./app-vh6XL3P4.js";function l(){try{const a=localStorage.getItem("user");return a?JSON.parse(a):null}catch(a){return console.error("Failed to parse user data from localStorage:",a),null}}async function m(a){const o=`${i}/${a}`,e={method:"GET",headers:n(!0)};try{return await c(o,e)}catch(r){throw console.error("Error reading profile:",r.message),r}}async function f(a){const o=`https://v2.api.noroff.dev/auction/profiles/${a}/listings`,e={method:"GET",headers:n(!0)};try{return await c(o,e)}catch(r){throw console.error("Error fetching user listings:",r.message),r}}async function g(a){const o=l();if(!o||!o.name)throw new Error("User not found");const e=`${i}/${o.name}`;try{const t={avatar:{url:await d(a),alt:`${o.name}'s avatar`}},s=await fetch(e,{method:"PUT",headers:n(!0),body:JSON.stringify(t)});if(!s.ok){const u=await s.json();throw new Error(u.message||"Failed to update avatar")}return await s.json()}catch(r){throw console.error("Error updating avatar:",r.message),r}}async function d(a){const o="https://api.cloudinary.com/v1_1/dfe8rtu97/image/upload",e="avatar",r=new FormData;r.append("file",a),r.append("upload_preset",e);try{const t=await fetch(o,{method:"POST",body:r});if(!t.ok)throw new Error("Failed to upload image to hosting service");return(await t.json()).secure_url}catch(t){throw console.error("Error uploading image:",t.message),t}}export{f as a,m as r,g as u};
